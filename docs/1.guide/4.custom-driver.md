---  
icon: carbon:area-custom  
---  

# 自定义驱动器  

> 通过创建自定义驱动器，可以扩展 `unstorage`。  

浏览 [src/drivers](https://github.com/unjs/unstorage/tree/main/src/drivers) 以了解如何实现它们。方法可以：  

```js  
import { createStorage, defineDriver } from "unstorage";  

const myStorageDriver = defineDriver((options) => {  
  return {  
    name: "my-custom-driver",  
    options,  
    async hasItem(key, _opts) {},  
    async getItem(key, _opts) {},  
    async setItem(key, value, _opts) {},  
    async removeItem(key, _opts) {},  
    async getKeys(base, _opts) {},  
    async clear(base, _opts) {},  
    async dispose() {},  
    async watch(callback) {},  
  };  
});  

const storage = createStorage({  
  driver: myStorageDriver(),  
});  
```  

一些重要说明：  

- 键应该遵循 `foo:bar` 规范进行标准化  
- 在 `dispose()` 中移除任何打开的观察者和处理程序  
- 返回一个 Promise 是可选的，你可以返回一个直接值（见 [memory driver](https://github.com/unjs/unstorage/blob/main/src/drivers/memory.ts)）  
- 你无法访问挂载基础  
- `getItem` 返回的值可以是可序列化的 `object` 或 `string`  
- 当设置 `watch` 方法时，默认的 unstorage 处理程序将被禁用。你需要在 `getItem`、`setItem` 和 `removeItem` 中负责发出事件。  