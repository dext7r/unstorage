---
icon: ic:baseline-http
---

# HTTP æœåŠ¡å™¨

> æˆ‘ä»¬å¯ä»¥å°† unstore çš„å®ä¾‹æš´éœ²ç»™ HTTP æœåŠ¡å™¨ä»¥å…è®¸è¿œç¨‹è¿æ¥ã€‚

è¯·æ±‚ URL è¢«æ˜ å°„åˆ°ä¸€ä¸ªé”®ï¼Œæ–¹æ³•/è¯·æ±‚ä½“è¢«æ˜ å°„åˆ°ä¸€ä¸ªå‡½æ•°ã€‚è¯·æŸ¥çœ‹ä¸‹æ–¹æ”¯æŒçš„ HTTP æ–¹æ³•ã€‚

## å­˜å‚¨æœåŠ¡å™¨

ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œä»¥æš´éœ²ä¸ `storage` å®ä¾‹é€šä¿¡çš„æ–¹æ³•ï¼š

```js [server.js]
import { listen } from "listhen";
import { createStorage } from "unstorage";
import { createStorageServer } from "unstorage/server";

const storage = createStorage();
const storageServer = createStorageServer(storage, {
  authorize(req) {
    // req: { key, type, event }
    if (req.type === "read" && req.key.startsWith("private:")) {
      throw new Error("æœªæˆæƒçš„è¯»å–");
    }
  },
});

// æˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `storageServer.handle` ä½œä¸ºä¸­é—´ä»¶
await listen(storageServer.handle);
```

`storageServer` æ˜¯ä¸€ä¸ª [h3](https://github.com/unjs/h3) å®ä¾‹ã€‚è¿˜å¯ä»¥æŸ¥çœ‹ [listhen](https://github.com/unjs/listhen) ä»¥è·å¾—ä¼˜é›…çš„ HTTP ç›‘å¬å™¨ã€‚

::warning
**ğŸ›¡ï¸ å®‰å…¨æç¤ºï¼š** è¯·ç¡®ä¿å§‹ç»ˆå®ç° `authorize` ä»¥ä¿æŠ¤æœåŠ¡å™¨åœ¨æš´éœ²äºç”Ÿäº§ç¯å¢ƒæ—¶çš„å®‰å…¨ã€‚
::

## å­˜å‚¨å®¢æˆ·ç«¯

æ‚¨å¯ä»¥ä½¿ç”¨ [http é©±åŠ¨ç¨‹åº](/drivers/http) è½»æ¾è¿æ¥åˆ°æœåŠ¡å™¨ã€‚

```ts
import { createStorage } from "unstorage";
import httpDriver from "unstorage/drivers/http";

const client = createStorage({
  driver: httpDriver({
    base: "SERVER_ENDPOINT",
  }),
});
const keys = await client.getKeys();
```

## HTTP æ–¹æ³•

- `GET`ï¼šå½“è·¯å¾„ä»¥ `/` æˆ– `/:` ç»“å°¾æ—¶ï¼Œæ˜ å°„åˆ° `storage.getItem` æˆ– `storage.getKeys`
- `HEAD`ï¼šæ˜ å°„åˆ° `storage.hasItem`ã€‚å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™è¿”å› 404ã€‚
- `PUT`ï¼šæ˜ å°„åˆ° `storage.setItem`ã€‚å€¼ä»è¯·æ±‚ä½“ä¸­è¯»å–ï¼Œå¦‚æœæ“ä½œæˆåŠŸåˆ™è¿”å› `OK`ã€‚
- `DELETE`ï¼šå½“è·¯å¾„ä»¥ `/` æˆ– `/:` ç»“å°¾æ—¶ï¼Œæ˜ å°„åˆ° `storage.removeItem` æˆ– `storage.clear`ã€‚å¦‚æœæ“ä½œæˆåŠŸåˆ™è¿”å› `OK`ã€‚

::note
å½“ä¸º GET å’Œ SET æ“ä½œä¼ é€’ `accept: application/octet-stream` æ—¶ï¼ŒæœåŠ¡å™¨é€šè¿‡ `getItemRaw` å’Œ `setItemRaw` åˆ‡æ¢åˆ°äºŒè¿›åˆ¶æ¨¡å¼ã€‚
::